<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400" width="900" height="400">
  <!-- White background -->
  <rect width="900" height="400" fill="white"/>
  
  <!-- Instruction labels -->
  <text x="120" y="100" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">ld x1,0(x2)</text>
  <text x="120" y="140" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">addi x1,x1,1</text>
  <text x="120" y="180" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">sd x1,0(x2)</text>
  <text x="120" y="220" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">addi x2,x2,4</text>
  <text x="120" y="260" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">sub x4,x3,x2</text>
  <text x="120" y="300" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">bnez x4,Loop</text>
  <text x="120" y="340" font-family="Arial" font-size="14" text-anchor="end" font-weight="bold">ld x1,0(x2)</text>
  
  <!-- Cycle numbers header -->
  <text x="150" y="60" font-family="Arial" font-size="14" font-weight="bold">Cycle:</text>
  
  <!-- Cycle numbers -->
  <g font-family="Arial" font-size="14" text-anchor="middle">
    <text x="150" y="80">1</text>
    <text x="190" y="80">2</text>
    <text x="230" y="80">3</text>
    <text x="270" y="80">4</text>
    <text x="310" y="80">5</text>
    <text x="350" y="80">6</text>
    <text x="390" y="80">7</text>
    <text x="430" y="80">8</text>
    <text x="470" y="80">9</text>
    <text x="510" y="80">10</text>
    <text x="550" y="80">11</text>
    <text x="590" y="80">12</text>
    <text x="630" y="80">13</text>
    <text x="670" y="80">14</text>
    <text x="710" y="80">15</text>
  </g>
  
  <!-- Pipeline stages -->
  <!-- ld instruction -->
  <rect x="130" y="85" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="150" y="105" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="170" y="85" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="190" y="105" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <rect x="210" y="85" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="230" y="105" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="250" y="85" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="270" y="105" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="290" y="85" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="310" y="105" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- addi instruction -->
  <rect x="170" y="125" width="40" height="30" fill="#FFCBC1" stroke="black" stroke-width="1"/>
  <text x="190" y="145" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="210" y="125" width="40" height="30" fill="#FFCBC1" stroke="black" stroke-width="1"/>
  <text x="230" y="145" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <!-- stalls -->
  <rect x="250" y="125" width="40" height="30" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="270" y="145" font-family="Arial" font-size="14" text-anchor="middle">st</text>
  
  <rect x="290" y="125" width="40" height="30" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="310" y="145" font-family="Arial" font-size="14" text-anchor="middle">st</text>
  
  <rect x="330" y="125" width="40" height="30" fill="#FFCBC1" stroke="black" stroke-width="1"/>
  <text x="350" y="145" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="370" y="125" width="40" height="30" fill="#FFCBC1" stroke="black" stroke-width="1"/>
  <text x="390" y="145" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="410" y="125" width="40" height="30" fill="#FFCBC1" stroke="black" stroke-width="1"/>
  <text x="430" y="145" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- sd instruction -->
  <rect x="210" y="165" width="40" height="30" fill="#B8E1FF" stroke="black" stroke-width="1"/>
  <text x="230" y="185" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="250" y="165" width="40" height="30" fill="#B8E1FF" stroke="black" stroke-width="1"/>
  <text x="270" y="185" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <!-- stalls -->
  <rect x="290" y="165" width="40" height="30" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="310" y="185" font-family="Arial" font-size="14" text-anchor="middle">st</text>
  
  <rect x="330" y="165" width="40" height="30" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="350" y="185" font-family="Arial" font-size="14" text-anchor="middle">st</text>
  
  <rect x="370" y="165" width="40" height="30" fill="#B8E1FF" stroke="black" stroke-width="1"/>
  <text x="390" y="185" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="410" y="165" width="40" height="30" fill="#B8E1FF" stroke="black" stroke-width="1"/>
  <text x="430" y="185" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="450" y="165" width="40" height="30" fill="#B8E1FF" stroke="black" stroke-width="1"/>
  <text x="470" y="185" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- addi instruction -->
  <rect x="250" y="205" width="40" height="30" fill="#FFF5BA" stroke="black" stroke-width="1"/>
  <text x="270" y="225" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="290" y="205" width="40" height="30" fill="#FFF5BA" stroke="black" stroke-width="1"/>
  <text x="310" y="225" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <!-- stall -->
  <rect x="330" y="205" width="40" height="30" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="350" y="225" font-family="Arial" font-size="14" text-anchor="middle">st</text>
  
  <rect x="370" y="205" width="40" height="30" fill="#FFF5BA" stroke="black" stroke-width="1"/>
  <text x="390" y="225" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="410" y="205" width="40" height="30" fill="#FFF5BA" stroke="black" stroke-width="1"/>
  <text x="430" y="225" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="450" y="205" width="40" height="30" fill="#FFF5BA" stroke="black" stroke-width="1"/>
  <text x="470" y="225" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- sub instruction -->
  <rect x="290" y="245" width="40" height="30" fill="#D3BFFF" stroke="black" stroke-width="1"/>
  <text x="310" y="265" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="330" y="245" width="40" height="30" fill="#D3BFFF" stroke="black" stroke-width="1"/>
  <text x="350" y="265" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <rect x="370" y="245" width="40" height="30" fill="#D3BFFF" stroke="black" stroke-width="1"/>
  <text x="390" y="265" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="410" y="245" width="40" height="30" fill="#D3BFFF" stroke="black" stroke-width="1"/>
  <text x="430" y="265" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="450" y="245" width="40" height="30" fill="#D3BFFF" stroke="black" stroke-width="1"/>
  <text x="470" y="265" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- bnez instruction -->
  <rect x="330" y="285" width="40" height="30" fill="#FFCCF9" stroke="black" stroke-width="1"/>
  <text x="350" y="305" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="370" y="285" width="40" height="30" fill="#FFCCF9" stroke="black" stroke-width="1"/>
  <text x="390" y="305" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <rect x="410" y="285" width="40" height="30" fill="#FFCCF9" stroke="black" stroke-width="1"/>
  <text x="430" y="305" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="450" y="285" width="40" height="30" fill="#FFCCF9" stroke="black" stroke-width="1"/>
  <text x="470" y="305" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="490" y="285" width="40" height="30" fill="#FFCCF9" stroke="black" stroke-width="1"/>
  <text x="510" y="305" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- Branch flush indicator -->
  <path d="M 430 315 L 530 315" stroke="red" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="480" y="330" font-family="Arial" font-size="14" fill="red" text-anchor="middle">Branch flush</text>
  
  <!-- Next iteration ld -->
  <rect x="530" y="325" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="550" y="345" font-family="Arial" font-size="14" text-anchor="middle">IF</text>
  
  <rect x="570" y="325" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="590" y="345" font-family="Arial" font-size="14" text-anchor="middle">ID</text>
  
  <rect x="610" y="325" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="630" y="345" font-family="Arial" font-size="14" text-anchor="middle">EX</text>
  
  <rect x="650" y="325" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="670" y="345" font-family="Arial" font-size="14" text-anchor="middle">ME</text>
  
  <rect x="690" y="325" width="40" height="30" fill="#A0E7E5" stroke="black" stroke-width="1"/>
  <text x="710" y="345" font-family="Arial" font-size="14" text-anchor="middle">WB</text>
  
  <!-- Legend -->
  <rect x="600" y="20" width="20" height="20" fill="#EEEEEE" stroke="black" stroke-width="1"/>
  <text x="625" y="35" font-family="Arial" font-size="14" text-anchor="start">stall</text>
  
  <path d="M 600 50 L 630 50" stroke="red" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="640" y="55" font-family="Arial" font-size="14" fill="red" text-anchor="start">branch flush</text>
  
  <!-- Summary at bottom -->
  <text x="450" y="390" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">
    Each iteration: 11 cycles Ã— 99 iterations = 1089 cycles total
  </text>
</svg>
